(function(n){"use strict";var p={getModelTags:function(e){var t,i=e.getElementsByTagName("attributes"),r={},n=i.length;for(t=0;t<n;t++)r[i[t].getAttribute("class")]=i[t].childNodes;return r},nodeListToArray:function(e){for(var t=[],i=0,r=e.length;i<r;++i)"#text"!==e[i].nodeName&&t.push(e[i]);return t},nodeListEach:function(e,t){for(var i=0,r=e.length;i<r;++i)"#text"!==e[i].nodeName&&t(e[i])},nodeListToHash:function(e,t){for(var i={},r=0;r<e.length;r++)if("#text"!==e[r].nodeName){var n=t(e[r]);i[n.key]=n.value}return i},namedNodeMapToObject:function(e){for(var t={},i=0;i<e.length;i++)t[e[i].name]=e[i].value;return t},getFirstElementByTagNS:function(e,t,i){var r=e.getElementsByTagName(t+":"+i)[0];return r||(r=e.getElementsByTagNameNS(t,i)[0]),r||(r=e.getElementsByTagName(i)[0]),r},getAttributeNS:function(e,t,i){var r=e.getAttribute(t+":"+i);return r===n&&(r=e.getAttributeNS(t,i)),r===n&&(r=e.getAttribute(i)),r},enforceType:function(e,t){switch(e){case"boolean":t="true"===t;break;case"integer":case"long":case"float":case"double":t=+t;break;case"liststring":t=t?t.split("|"):[]}return t},getRGB:function(e){return e[3]?"rgba("+e.join(",")+")":"rgb("+e.slice(0,-1).join(",")+")"}};function i(e){var i={};i.els={root:e.getElementsByTagName("gexf")[0],graph:e.getElementsByTagName("graph")[0],meta:e.getElementsByTagName("meta")[0],nodes:e.getElementsByTagName("node"),edges:e.getElementsByTagName("edge"),model:p.getModelTags(e)},i.hasViz=!!p.getAttributeNS(i.els.root,"xmlns","viz"),i.version=i.els.root.getAttribute("version")||"1.0",i.mode=i.els.graph.getAttribute("mode")||"static";var t=i.els.graph.getAttribute("defaultedgetype");function r(e){var r=[];return i.els.model[e]&&p.nodeListEach(i.els.model[e],function(e){var t={id:e.getAttribute("id")||e.getAttribute("for"),type:e.getAttribute("type")||"string",title:e.getAttribute("title")||""},i=p.nodeListToArray(e.childNodes);0<i.length&&(t.defaultValue=i[0].textContent),r.push(t)}),0<r.length&&r}function n(e,t){var i={},r=t.getElementsByTagName("attvalue"),n=p.nodeListToHash(r,function(e){var t=p.namedNodeMapToObject(e.attributes);return{key:t.id||t.for,value:t.value}});return e.map(function(e){i[e.id]=!(e.id in n)&&"defaultValue"in e?p.enforceType(e.type,e.defaultValue):p.enforceType(e.type,n[e.id])}),i}i.defaultEdgetype=t||"undirected";var a,o,s,u,g,l,d=r("node"),c=r("edge"),f={version:i.version,mode:i.mode,defaultEdgeType:i.defaultEdgetype,meta:(l={},i.els.meta&&(l.lastmodifieddate=i.els.meta.getAttribute("lastmodifieddate"),p.nodeListEach(i.els.meta.childNodes,function(e){l[e.tagName.toLowerCase()]=e.textContent})),l),model:{},nodes:(u=d,g=[],p.nodeListEach(i.els.nodes,function(e){var t={id:e.getAttribute("id"),label:e.getAttribute("label")||""};u&&(t.attributes=n(u,e)),i.hasViz&&(t.viz=function(e){var t={},i=p.getFirstElementByTagNS(e,"viz","color");if(i){var r=["r","g","b","a"].map(function(e){return i.getAttribute(e)});t.color=p.getRGB(r)}var n=p.getFirstElementByTagNS(e,"viz","position");n&&(t.position={},["x","y","z"].map(function(e){t.position[e]=+n.getAttribute(e)}));var a=p.getFirstElementByTagNS(e,"viz","size");a&&(t.size=+a.getAttribute("value"));var o=p.getFirstElementByTagNS(e,"viz","shape");return o&&(t.shape=o.getAttribute("value")),t}(e)),g.push(function(e){var t={id:e.id,label:e.label};return e.viz&&(t.viz=e.viz),e.attributes&&(t.attributes=e.attributes),t}(t))}),g),edges:(a=c,o=i.defaultEdgetype,s=[],p.nodeListEach(i.els.edges,function(e){var t=p.namedNodeMapToObject(e.attributes);"type"in t||(t.type=o),a&&(t.attributes=n(a,e)),i.hasViz&&(t.viz=function(e){var t={},i=p.getFirstElementByTagNS(e,"viz","color");if(i){var r=["r","g","b","a"].map(function(e){return i.getAttribute(e)});t.color=p.getRGB(r)}var n=p.getFirstElementByTagNS(e,"viz","shape");n&&(t.shape=n.getAttribute("value"));var a=p.getFirstElementByTagNS(e,"viz","thickness");return a&&(t.thickness=+a.getAttribute("value")),t}(e)),s.push(function(e){var t={id:e.id,type:e.type||"undirected",label:e.label||"",source:e.source,target:e.target,weight:+e.weight||1};return e.viz&&(t.viz=e.viz),e.attributes&&(t.attributes=e.attributes),t}(t))}),s)};return d&&(f.model.node=d),c&&(f.model.edge=c),f}function r(e,t){var i=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;var e,t;if(window.ActiveXObject)for(t in e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"])try{return new ActiveXObject(e[t])}catch(e){}return null}();if(!i)throw"XMLHttpRequest not supported, cannot load the file.";var r,n="function"==typeof t;return r=i.overrideMimeType?(i.overrideMimeType("text/xml"),function(e){return e.responseXML}):function(e){return(new DOMParser).parseFromString(e.responseText,"application/xml")},i.open("GET",e,n),n&&(i.onreadystatechange=function(){4===i.readyState&&t(r(i))}),i.send(),n?i:r(i)}if(void 0!==this.gexf)throw'gexf: error - a variable called "gexf" already exists in the global scope';this.gexf={parse:function(e){return i(e)},fetch:function(e,t){return"function"==typeof t?r(e,function(e){t(i(e))}):i(r(e))},version:"0.1.1"},"undefined"!=typeof exports&&this.exports!==exports&&(module.exports=this.gexf)}).call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.parsers");var u=0;sigma.parsers.gexf=function(e,t,i){var r,n,a,o;function s(e){for(a=e.nodes,r=0,n=a.length;r<n;r++)(o=a[r]).id=o.id,o.viz&&"object"==typeof o.viz&&(o.viz.position&&"object"==typeof o.viz.position&&(o.x=o.viz.position.x,o.y=-o.viz.position.y),o.size=o.viz.size,o.color=o.viz.color,o.viz.shape&&(o.type=o.viz.shape));for(a=e.edges,r=0,n=a.length;r<n;r++)(o=a[r]).id="string"==typeof o.id?o.id:"e"+u++,o.source=""+o.source,o.target=""+o.target,o.viz&&"object"==typeof o.viz&&(o.color=o.viz.color,o.size=o.viz.thickness),o.size=o.weight,o.direction=o.type,delete o.type;if(t instanceof sigma){for(t.graph.clear(),a=e.nodes,r=0,n=a.length;r<n;r++)t.graph.addNode(a[r]);for(a=e.edges,r=0,n=a.length;r<n;r++)t.graph.addEdge(a[r])}else"object"==typeof t?(t.graph=e,t=new sigma(t)):"function"==typeof t&&(i=t,t=null);return i?void i(t||e):e}if("string"==typeof e)gexf.fetch(e,s);else if("object"==typeof e)return s(gexf.parse(e))}}.call(this);