(function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var t=0,e={};function d(a){if(e[a])return e[a];var n=[0,0,0];return a.match(/^#/)?n=3===(a=(a||"").replace(/^#/,"")).length?[parseInt(a.charAt(0)+a.charAt(0),16),parseInt(a.charAt(1)+a.charAt(1),16),parseInt(a.charAt(2)+a.charAt(2),16)]:[parseInt(a.charAt(0)+a.charAt(1),16),parseInt(a.charAt(2)+a.charAt(3),16),parseInt(a.charAt(4)+a.charAt(5),16)]:a.match(/^ *rgba? *\(/)&&(n=[+(a=a.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/))[1],+a[2],+a[3]]),e[a]={r:n[0],g:n[1],b:n[2]},e[a]}sigma.plugins.animate=function(e,s,a){var i,o,n,r=a||{},c=++t,g=r.duration||e.settings("animationsTime"),m="string"==typeof r.easing?sigma.utils.easings[r.easing]:"function"==typeof r.easing?r.easing:sigma.utils.easings.quadraticInOut,u=sigma.utils.dateNow();for(n in i=r.nodes&&r.nodes.length?"object"==typeof r.nodes[0]?r.nodes:e.graph.nodes(r.nodes):e.graph.nodes(),o=i.reduce(function(a,n){var e;for(e in a[n.id]={},s)e in n&&(a[n.id][e]=n[e]);return a},{}),e.animations=e.animations||Object.create({}),sigma.plugins.kill(e),e.cameras)e.cameras[n].edgequadtree._enabled=!1;!function a(){var t=(sigma.utils.dateNow()-u)/g;if(1<=t){var n;for(n in i.forEach(function(a){for(var n in s)n in s&&(a[n]=a[s[n]])}),e.cameras)e.cameras[n].edgequadtree._enabled=!0;e.refresh(),"function"==typeof r.onComplete&&r.onComplete()}else t=m(t),i.forEach(function(a){for(var n in s)n in s&&(n.match(/color$/)?a[n]=(e=o[a.id][n],i=a[s[n]],r=t,e=d(e),i=d(i),"rgb("+[0|e.r*(1-r)+i.r*r,0|e.g*(1-r)+i.g*r,0|e.b*(1-r)+i.b*r].join(",")+")"):a[n]=a[s[n]]*t+o[a.id][n]*(1-t));var e,i,r}),e.refresh(),e.animations[c]=requestAnimationFrame(a)}()},sigma.plugins.kill=function(a){for(var n in a.animations||{})cancelAnimationFrame(a.animations[n]);for(n in a.cameras)a.cameras[n].edgequadtree._enabled=!0}}).call(window);